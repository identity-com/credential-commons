"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),uuid=require("uuid/v4"),logger=require("../logger");function DummyAnchorServiceImpl(a,b){var c=this;this.config=a,this.http=b;var d=function(){var a=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function a(b){var e;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.http.request({url:b,method:"GET",simple:!0,json:!0});case 3:if(e=a.sent,e&&e.type){a.next=8;break}return a.next=7,d(b);case 7:return a.abrupt("return",a.sent);case 8:if(!(e&&"permanent"!==e.type)){a.next=11;break}return e.statusUrl=b,a.abrupt("return",e);case 11:return a.abrupt("return",e);case 14:throw a.prev=14,a.t0=a["catch"](0),logger.error("Error polling: ".concat(b),JSON.stringify(a.t0,null,2)),new Error("Error polling: ".concat(b));case 18:case"end":return a.stop();}},a,null,[[0,14]])}));return function(){return a.apply(this,arguments)}}();return this.anchor=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function a(){var b,c=arguments;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=0<c.length&&void 0!==c[0]?c[0]:{},a.abrupt("return",Promise.resolve({subject:{pub:"xpub:dummy",label:b.subject&&b.subject.label?b.subject.label:null,data:b.subject&&b.subject.data?b.subject.data:null,signature:"signed:dummy"},walletId:"none",cosigners:[{pub:"xpub:dummy"},{pub:"xpub:dummy"}],authority:{pub:"xpub:dummy",path:"/"},coin:"dummycoin",tx:new uuid,network:"dummynet",type:"temporary",civicAsPrimary:!1,schema:"dummy-20180201"}));case 2:case"end":return a.stop();}},a)})),this.update=function(){var a=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function a(b){return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.type="permanent",b.value=uuid(),a.abrupt("return",Promise.resolve(b));case 3:case"end":return a.stop();}},a)}));return function(){return a.apply(this,arguments)}}(),this.verifySignature=function(){return!0},this.verifySubjectSignature=function(){return!0},this.verifyAttestation=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function a(){return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",!0);case 1:case"end":return a.stop();}},a)})),this.revokeAttestation=function(){var a=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function a(b){return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.revoked=!0,a.abrupt("return",Promise.resolve(b));case 2:case"end":return a.stop();}},a)}));return function(){return a.apply(this,arguments)}}(),this.isRevoked=function(a){return!!a.revoked&&a.revoked},this}module.exports={CurrentCivicAnchor:DummyAnchorServiceImpl};