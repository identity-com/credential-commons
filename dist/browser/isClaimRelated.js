"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_=require("lodash"),_require=require("./claim/Claim"),definitions=_require.definitions,Claim=_require.Claim,vcDefinitions=require("./creds/definitions"),_require2=require("./schemas/jsonSchema"),schemaLoader=_require2.schemaLoader;function isClaimRelated(){return _isClaimRelated.apply(this,arguments)}function _isClaimRelated(){return _isClaimRelated=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function d(a,b,c){var e,f,g,h;return _regenerator.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,schemaLoader.loadSchemaFromTitle(a);case 2:return d.next=4,schemaLoader.loadSchemaFromTitle(b);case 4:return d.next=6,schemaLoader.loadSchemaFromTitle(c);case 6:return e=b.substring(b.indexOf("-")+1,b.lastIndexOf("-")),d.next=9,schemaLoader.loadSchemaFromTitle(e);case 9:if(f=definitions.find(function(a){return a.identifier===e}),!f){d.next=24;break}return d.next=13,Claim.getAllProperties(e);case 13:if(g=d.sent,!_.includes(g,a)){d.next=21;break}if(h=vcDefinitions.find(function(a){return a.identifier===c}),!h){d.next=18;break}return d.abrupt("return",_.includes(h.depends,e));case 18:throw new Error("Credential identifier does not exist");case 21:throw new Error("Claim property path does not exist on UCA definitions");case 22:d.next=25;break;case 24:throw new Error("UCA identifier does not exist");case 25:case"end":return d.stop();}},d)})),_isClaimRelated.apply(this,arguments)}module.exports=isClaimRelated;