"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_=require("lodash"),_require=require("./claim/Claim"),definitions=_require.definitions,Claim=_require.Claim,vcDefinitions=require("./creds/definitions"),_require2=require("./schemas/jsonSchema"),schemaLoader=_require2.schemaLoader;function isClaimRelated(){return _isClaimRelated.apply(this,arguments)}function _isClaimRelated(){return _isClaimRelated=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function a(b,c,d){var e,f,g,h;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,schemaLoader.loadSchemaFromTitle(b);case 2:return a.next=4,schemaLoader.loadSchemaFromTitle(c);case 4:return a.next=6,schemaLoader.loadSchemaFromTitle(d);case 6:return e=c.substring(c.indexOf("-")+1,c.lastIndexOf("-")),a.next=9,schemaLoader.loadSchemaFromTitle(e);case 9:if(f=definitions.find(function(a){return a.identifier===e}),!f){a.next=24;break}return a.next=13,Claim.getAllProperties(e);case 13:if(g=a.sent,!_.includes(g,b)){a.next=21;break}if(h=vcDefinitions.find(function(a){return a.identifier===d}),!h){a.next=18;break}return a.abrupt("return",_.includes(h.depends,e));case 18:throw new Error("Credential identifier does not exist");case 21:throw new Error("Claim property path does not exist on UCA definitions");case 22:a.next=25;break;case 24:throw new Error("UCA identifier does not exist");case 25:case"end":return a.stop();}},a)})),_isClaimRelated.apply(this,arguments)}module.exports=isClaimRelated;