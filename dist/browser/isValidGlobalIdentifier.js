"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_=require("lodash"),_require=require("./schemas/jsonSchema"),schemaLoader=_require.schemaLoader,validUCAIdentifiers=schemaLoader.validIdentifiers,validClaimIdentifiers=schemaLoader.validIdentifiers,validVCIdentifiers=schemaLoader.validCredentialIdentifiers,validPrefixes=["claim","credential"];function isValidGlobalIdentifier(){return _isValidGlobalIdentifier.apply(this,arguments)}function _isValidGlobalIdentifier(){return _isValidGlobalIdentifier=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function a(b){var c;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,schemaLoader.loadSchemaFromTitle(b);case 2:if(c=_.split(b,"-"),3===c.length){a.next=5;break}throw new Error("Malformed Global Identifier");case 5:if(_.includes(validPrefixes,c[0])){a.next=7;break}throw new Error("Invalid Global Identifier Prefix");case 7:a.t0=c[0],a.next="claim"===a.t0?10:"credential"===a.t0?13:16;break;case 10:if(_.includes(validUCAIdentifiers,c[1])||_.includes(validClaimIdentifiers,b)){a.next=12;break}throw new Error("".concat(b," is not valid"));case 12:return a.abrupt("return",!0);case 13:if(_.includes(validVCIdentifiers,c[1])||_.includes(validVCIdentifiers,b)){a.next=15;break}throw new Error("".concat(b," is not valid"));case 15:return a.abrupt("return",!0);case 16:return a.abrupt("return",!1);case 17:case"end":return a.stop();}},a)})),_isValidGlobalIdentifier.apply(this,arguments)}module.exports=isValidGlobalIdentifier;